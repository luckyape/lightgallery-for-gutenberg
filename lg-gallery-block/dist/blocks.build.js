!function(e){function t(l){if(n[l])return n[l].exports;var o=n[l]={i:l,l:!1,exports:{}};return e[l].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t){e.exports=lodash},function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},function(e,t,n){"use strict";var l=(n(3),n(4),n(26)),o=(n.n(l),n(0));n.n(o);n.o(l,"createContext")&&n.d(t,"c",function(){return l.createContext}),n.o(l,"createElement")&&n.d(t,"d",function(){return l.createElement}),n.o(l,"Fragment")&&n.d(t,"a",function(){return l.Fragment}),n.o(l,"StrictMode")&&n.d(t,"b",function(){return l.StrictMode})},function(e,t,n){"use strict";function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},l=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),l.forEach(function(t){Object(o.a)(e,t,n[t])})}return e}t.a=l;var o=n(24)},function(e,t,n){"use strict";function l(e,t){if(null==e)return{};var n,l,r=Object(o.a)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)n=i[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.a=l;var o=n(25)},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function l(e,t,l){return t&&n(e.prototype,t),l&&n(e,l),e}e.exports=l},function(e,t,n){function l(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?r(e):t}var o=n(22),r=n(1);e.exports=l},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}var o=n(23);e.exports=l},function(e,t,n){"use strict";n(2),n(27),n(29),n(30),n(11)},function(e,t,n){"use strict";function l(e){var t=e.children,n=Object(r.a)(e,["children"]);return Object(i.d)("div",Object(o.a)({dangerouslySetInnerHTML:{__html:t}},n))}t.a=l;var o=n(3),r=n(4),i=n(2)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(13)},function(e,t,n){"use strict";var l=n(0),o=(n.n(l),n(14)),r=(n.n(o),n(15)),i=wp.i18n.__,a=wp.blocks.createBlock,s=wp.editor.mediaUpload,c=wp.blob.createBlobURL,u=wp.blocks.registerBlockType;u("lgng/gallery",{title:i("Lightgallery Gallery"),description:i("Lightgallery/lightslider gallery."),icon:"format-gallery",category:"common",keywords:[i("images"),i("photos")],supports:{align:["center","wide","full"],anchor:!0},transforms:{from:[{type:"block",isMultiBlock:!0,blocks:["core/image"],transform:function(e){var t=Object(l.filter)(e,function(e){var t=e.id,n=e.url;return t&&n});return t.length>0?(console.log(t,"images to transform to lgng block"),a("lgng/gallery",{images:JSON.stringify(t.map(function(e){return{id:e.id,url:e.url,alt:e.alt,caption:e.caption}})),columns:t.length,ls_mode:"lg-slide",lg_mode:"Slide",align:"center",lightslider:!0,lightgallery:!0})):a("lgng/gallery")}},{type:"block",blocks:["core/gallery"],transform:function(e){var t=e.images,n=Object(l.filter)(t,function(e){var t=e.id,n=e.url;return t&&n});return n.length>0?(console.log(n,"images to transform from gallery to lgng block"),a("lgng/gallery",{images:JSON.stringify(n.map(function(e){return{id:e.id,url:e.url,alt:e.alt,caption:e.caption}})),columns:n.length,ls_mode:"lg-slide",lg_mode:"Slide",align:"center",lightslider:!0,lightgallery:!0})):a("lgng/gallery")}},{type:"shortcode",tag:"lg_gallery",attributes:{images:{type:"array",shortcode:function(e){var t=e.named.ids;return t?t.split(",").map(function(e){return{id:parseInt(e,10)}}):[]}},columns:{type:"number",shortcode:function(e){var t=e.named.columns,n=void 0===t?"3":t;return parseInt(n,10)}}}},{type:"files",isMatch:function(e){return 1!==e.length&&Object(l.every)(e,function(e){return 0===e.type.indexOf("image/")})},transform:function(e,t){var n=a("lgng/gallery",{images:e.map(function(e){return{url:c(e)}})});return s({filesList:e,onFileChange:function(e){return t(n.clientId,{images:e})},allowedType:"image"}),n}}],to:[{type:"block",blocks:["core/image"],transform:function(e){var t=e.images,n=JSON.parse(t),o=Object(l.filter)(n,function(e){var t=e.id,n=e.url;return t&&n});return o.length>0?(console.log(o,"images to transform to image block"),o.map(function(e){var t=e.id,n=e.url,l=e.alt,o=e.caption;return a("core/image",{id:t,url:n,alt:l,caption:o})})):a("core/image")}},{type:"block",blocks:["core/gallery"],transform:function(e){var t=e.images,n="string"===typeof t?JSON.parse(t):t,o=Object(l.filter)(n,function(e){var t=e.id,n=e.url;return t&&n});return o.length>0?(console.log(o,"images to transform to gallery block"),a("core/gallery",{images:o})):a("core/gallery")}}]},edit:r.a,save:function(e){e.attributes;return null}})},function(e,t){},function(e,t,n){"use strict";function l(e){return Math.min(3,JSON.parse(e.images).length)}var o=n(16),r=n.n(o),i=n(18),a=n.n(i),s=n(5),c=n.n(s),u=n(6),p=n.n(u),g=n(7),m=n.n(g),d=n(8),f=n.n(d),b=n(9),y=n.n(b),h=n(1),v=n.n(h),S=(n(10),n(0)),w=(n.n(S),n(33)),k=(n.n(w),n(34)),O=wp.element,C=O.Component,E=O.Fragment,I=wp.i18n.__,x=wp.components,L=x.IconButton,j=x.Button,A=x.DropZone,_=(x.FormFileUpload,x.PanelBody),N=x.RangeControl,F=x.SelectControl,R=x.ToggleControl,P=x.TextareaControl,M=x.TextControl,D=x.Toolbar,T=x.withNotices,z=wp.editor,G=z.BlockControls,B=z.MediaUpload,J=z.MediaPlaceholder,U=z.InspectorControls,Z=z.InspectorAdvancedControls,K=z.mediaUpload,V=(I("Attachment Page"),I("Media File"),I("None"),[{value:"lg-slide",label:I("Slide")},{value:"lg-fade",label:I("Fade")},{value:"lg-zoom-in",label:I("Zoom In")},{value:"lg-zoom-in-big",label:I("Zoom In Big")},{value:"lg-zoom-out",label:I("Zoom Out")},{value:"lg-zoom-out-big",label:I("Zoom Out Big")},{value:"lg-zoom-out-in",label:I("Zoom Out In")},{value:"lg-zoom-in-out",label:I("Zoom In Out")},{value:"lg-soft-zoom",label:I("Soft Zoom")},{value:"lg-scale-up",label:I("Scale Up")},{value:"lg-slide-circular",label:I("Slide Circular")},{value:"lg-slide-circular-vertical",label:I("Slide Circular Vertical")},{value:"lg-slide-vertical",label:I("Slide Vertical")},{value:"lg-slide-vertical-growth",label:I("Slide Vertical Growth")},{value:"lg-slide-skew-only",label:I("Slide Skew Only")},{value:"lg-slide-skew-only-rev",label:I("Slide Skew Only Reverse")},{value:"lg-slide-skew-only-y",label:I("Slide Skew Only Y")},{value:"lg-slide-skew-only-y-rev",label:I("Slide Skew Only Y Reverse")},{value:"lg-slide-skew",label:I("Slide Skew")},{value:"lg-slide-skew-rev",label:I("Slide Skew Reverse")},{value:"lg-slide-skew-cross",label:I("Slide Skew Cross")},{value:"lg-slide-skew-cross-rev",label:I("Slide Skew Cross Reverse")},{value:"lg-slide-skew-ver",label:I("Slide Skew Vertical")},{value:"lg-slide-skew-ver-rev",label:I("Slide Skew Vertical Reverse")},{value:"lg-slide-skew-ver-cross",label:I("Slide Skew Vertical Cross")},{value:"lg-slide-skew-ver-cross-rev",label:I("Slide Skew Vertical Cross Reverse")},{value:"lg-lollipop",label:I("Lollipop")},{value:"lg-lollipop-rev",label:I("Lollipop Reverse")},{value:"lg-rotate",label:I("Rotate")},{value:"lg-rotate-rev",label:I("Rotate Reverse")},{value:"lg-tube",label:I("Tube")}]),q=[{value:"slide",label:I("Slide")}],H=function(e){function t(){var e;return c()(this,t),e=m()(this,f()(t).apply(this,arguments)),e.onSelectImage=e.onSelectImage.bind(v()(v()(e))),e.onSelectImages=e.onSelectImages.bind(v()(v()(e))),e.setLinkTo=e.setLinkTo.bind(v()(v()(e))),e.setLgMode=e.setLgMode.bind(v()(v()(e))),e.setLsMode=e.setLsMode.bind(v()(v()(e))),e.setColumnsNumber=e.setColumnsNumber.bind(v()(v()(e))),e.toggleLightslider=e.toggleLightslider.bind(v()(v()(e))),e.toggleLightgallery=e.toggleLightgallery.bind(v()(v()(e))),e.onRemoveImage=e.onRemoveImage.bind(v()(v()(e))),e.setImageAttributes=e.setImageAttributes.bind(v()(v()(e))),e.addFiles=e.addFiles.bind(v()(v()(e))),e.uploadFromFiles=e.uploadFromFiles.bind(v()(v()(e))),e.setLightSliderAddClass=e.setLightSliderAddClass.bind(v()(v()(e))),e.setLightSliderOptions=e.setLightSliderOptions.bind(v()(v()(e))),e.setLightGalleryOptions=e.setLightGalleryOptions.bind(v()(v()(e))),e.state={selectedImage:null},e}return y()(t,e),p()(t,[{key:"onSelectImage",value:function(e){var t=this;return function(){t.state.selectedImage!==e&&t.setState({selectedImage:e})}}},{key:"onRemoveImage",value:function(e){var t=this;return function(){var n=Object(S.filter)(JSON.parse(t.props.attributes.images),function(t,n){return e!==n}),l=t.props.attributes.columns;t.setState({selectedImage:null}),t.props.setAttributes({images:JSON.stringify(n),columns:l?Math.min(n.length,l):l})}}},{key:"onSelectImages",value:function(e){console.log("onsel",e);var t=a()(e.map(function(e){return Array.isArray(e.caption)&&(console.log("isarr",e.caption),e.caption=e.caption[0]),console.log("image",e),Object(S.pick)(e,["alt","caption","id","link","url","sizes.thumbnail"])}));console.log(t),this.props.setAttributes({images:JSON.stringify(t)})}},{key:"setLinkTo",value:function(e){this.props.setAttributes({linkTo:e})}},{key:"setLgMode",value:function(e){this.props.setAttributes({lg_mode:e})}},{key:"setLsMode",value:function(e){this.props.setAttributes({ls_mode:e})}},{key:"setLightSliderOptions",value:function(e){this.props.setAttributes({lightSliderOptions:e})}},{key:"setLightGalleryOptions",value:function(e){this.props.setAttributes({lightGalleryOptions:e})}},{key:"setLightSliderAddClass",value:function(e){this.props.setAttributes({lightSliderAddClass:e})}},{key:"setColumnsNumber",value:function(e){1!==e&&this.props.setAttributes({columns:e})}},{key:"toggleLightslider",value:function(){var e=this.props.attributes,t=e.columns,n=e.lightslider,l=(e.lightgallery,n?6:12);this.props.setAttributes({lightslider:!n,lightgallery:!0,columns:t>l?l:t})}},{key:"toggleLightgallery",value:function(){var e=this.props.attributes,t=e.lightslider,n=e.lightgallery;t&&this.props.setAttributes({lightgallery:!n})}},{key:"getLightgalleryHelp",value:function(e){return I(e?"Slider can be expanded to a fullscreen gallery.":"fullscreen gallery disabled.")}},{key:"getLightsliderHelp",value:function(e){return I(e?"Images are shown in a slider.":"Images are shown in a grid.")}},{key:"setImageAttributes",value:function(e,t){var n=this.props,l=n.attributes.images,o=n.setAttributes,i="string"===typeof l?JSON.parse(l):l;i[e]&&o({images:JSON.stringify(a()(i.slice(0,e)).concat([r()({},i[e],t)],a()(i.slice(e+1))))})}},{key:"uploadFromFiles",value:function(e){this.addFiles(e.target.files)}},{key:"addFiles",value:function(e){var t=JSON.parse(this.props.attributes.images)||[],n=this.props,l=n.noticeOperations,o=n.setAttributes;K({allowedType:"image",filesList:e,onFileChange:function(e){o({images:JSON.stringify(t.concat(e))})},onError:l.createErrorNotice})}},{key:"componentDidUpdate",value:function(e){!this.props.isSelected&&e.isSelected&&this.setState({selectedImage:null,captionSelected:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,o=t.isSelected,r=t.className,i=t.noticeOperations,a=t.noticeUI,s=n.images,c=n.columns,u=void 0===c?l(n):c,p=n.align,g=(n.linkTo,n.lightslider),m=n.lightgallery,d=n.ls_mode,f=n.lg_mode,b=n.lightSliderOptions,y=n.lightGalleryOptions,h=n.lightSliderAddClass;console.log(s);var v=wp.element.createElement(A,{onFilesDrop:this.addFiles}),S="string"===typeof s?JSON.parse(s):s,w=wp.element.createElement(G,null,!!S.length&&wp.element.createElement(D,null,wp.element.createElement(B,{onSelect:this.onSelectImages,type:"image",multiple:!0,gallery:!0,value:S.map(function(e){return e.id}),render:function(e){var t=e.open;return wp.element.createElement(L,{className:"components-toolbar__control",label:I("Edit Gallery"),icon:"edit",onClick:t})}})));return 0===S.length?wp.element.createElement(E,null,w,wp.element.createElement(J,{icon:"format-gallery",className:r,labels:{title:I("Gallery"),name:I("images")},onSelect:this.onSelectImages,accept:"image/*",type:"image",multiple:!0,notices:a,onError:i.createErrorNotice})):wp.element.createElement(E,null,w,wp.element.createElement(U,null,wp.element.createElement(_,{title:I("Gallery Settings")},wp.element.createElement(R,{label:I("Show in lightslider"),checked:!!g,onChange:this.toggleLightslider,help:this.getLightsliderHelp}),g&&wp.element.createElement(R,{label:I("Enable lightgallery"),checked:!!m,onChange:this.toggleLightgallery,help:this.getLightgalleryHelp}),S.length>1&&wp.element.createElement(N,{label:I(g?"amount of thumbs to show under lightslider":"grid columns"),value:u,onChange:this.setColumnsNumber,min:g?0:1,max:g?12:6}),wp.element.createElement(F,{label:I("Slider slide mode"),value:d,onChange:this.setLsMode,options:q}),wp.element.createElement(F,{label:I("Gallery slide mode"),value:f,onChange:this.setLgMode,options:V}))),wp.element.createElement(Z,null,wp.element.createElement(M,{label:"Lightslider container class",value:h,onChange:this.setLightSliderAddClass,help:"use this instead of addClass in additional options (so gutenberg wide alignment works)"}),wp.element.createElement(P,{label:I("Lightslider additional options"),value:b,help:"Enter comma separated key/value pairs (in quotes) e.g 'hideBarsDelay': 10000 sachinchoolur.github.io/lightslider/settings.html",onChange:this.setLightSliderOptions}),wp.element.createElement(P,{label:I("Lightgallery additional options"),value:y,help:"Enter comma separated key/value pairs (in quotes) sachinchoolur.github.io/lightGallery/docs/api.html",onChange:this.setLightGalleryOptions})),a,wp.element.createElement("div",{className:"lg-blocks-gallery-item ".concat(r," align").concat(p," ")},v,wp.element.createElement("div",{className:"lg-blocks-gallery-container"},S.map(function(t,n){return 0===u&&n>0?null:wp.element.createElement(k.a,{key:t.id||t.url,url:n>0||!g?t.sizes&&t.sizes.thumbnail.url:t.url,alt:t.alt,id:t.id,classes:(n>0||!g)&&"lgng-".concat(u,"-cols is-thumb"),isSelected:o&&e.state.selectedImage===n,onRemove:e.onRemoveImage(n),onSelect:e.onSelectImage(n),setAttributes:function(t){return e.setImageAttributes(n,t)},caption:t.caption})})),o&&wp.element.createElement("div",null,wp.element.createElement(B,{onSelect:this.onSelectImages,type:"image",multiple:!0,gallery:!0,value:S.map(function(e){return e.id}),render:function(e){var t=e.open;return wp.element.createElement("div",{className:"lg-blocks-edit-gallery"},wp.element.createElement(j,{className:"components-button is-button is-default is-large",onClick:t},I("Edit Gallery")))}}))))}}]),t}(C);t.a=T(H)},function(e,t,n){function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},l=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(l=l.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),l.forEach(function(t){o(e,t,n[t])})}return e}var o=n(17);e.exports=l},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=n},function(e,t,n){function l(e){return o(e)||r(e)||i()}var o=n(19),r=n(20),i=n(21);e.exports=l},function(e,t){function n(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}e.exports=n},function(e,t){function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}e.exports=n},function(e,t){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}e.exports=n},function(e,t){function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(t){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=l=function(e){return n(e)}:e.exports=l=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},l(t)}e.exports=l},function(e,t){function n(t,l){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,l)}e.exports=n},function(e,t,n){"use strict";function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=l},function(e,t,n){"use strict";function l(e,t){if(null==e)return{};var n,l,o={},r=Object.keys(e);for(l=0;l<r.length;l++)n=r[l],t.indexOf(n)>=0||(o[n]=e[n]);return o}t.a=l},function(e,t){e.exports=React},function(e,t,n){"use strict";var l=n(28);n.n(l)},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";var l=n(0);n.n(l)},function(e,t,n){"use strict";var l=(n(3),n(4),n(31),n(0)),o=(n.n(l),n(32),n(2)),r=(n(11),Object(o.c)());r.Provider,r.Consumer,new Set(["string","boolean","number"]),new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),new Set(["allowfullscreen","allowpaymentrequest","allowusermedia","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","typemustmatch"]),new Set(["autocapitalize","autocomplete","charset","contenteditable","crossorigin","decoding","dir","draggable","enctype","formenctype","formmethod","http-equiv","inputmode","kind","method","preload","scope","shape","spellcheck","translate","type","wrap"]),new Set(["animation","animationIterationCount","baselineShift","borderImageOutset","borderImageSlice","borderImageWidth","columnCount","cx","cy","fillOpacity","flexGrow","flexShrink","floodOpacity","fontWeight","gridColumnEnd","gridColumnStart","gridRowEnd","gridRowStart","lineHeight","opacity","order","orphans","r","rx","ry","shapeImageThreshold","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","x","y","zIndex","zoom"])},function(e,t,n){"use strict";function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return(o="function"===typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return l(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":l(e)})(e)}t.a=o},function(e,t,n){"use strict";function l(e){return e.replace(/&(?!([a-z0-9]+|#[0-9]+|#x[a-f0-9]+);)/gi,"&amp;")}function o(e){return e.replace(/"/g,"&quot;")}function r(e){return e.replace(/</g,"&lt;")}function i(e){return o(l(e))}function a(e){return r(l(e))}function s(e){return!c.test(e)}t.a=i,t.b=a,t.c=s;var c=/[\u007F-\u009F "'>\/="\uFDD0-\uFDEF]/},function(e,t){},function(e,t,n){"use strict";var l=n(5),o=n.n(l),r=n(6),i=n.n(r),a=n(7),s=n.n(a),c=n(8),u=n.n(c),p=n(9),g=n.n(p),m=n(1),d=n.n(m),f=(n(10),n(35)),b=n.n(f),y=wp.element,h=y.Component,v=y.Fragment,S=wp.components,w=S.IconButton,k=S.Spinner,O=(S.Modal,wp.i18n.__),C=wp.keycodes,E=C.BACKSPACE,I=C.DELETE,x=wp.data.withSelect,L=wp.editor.RichText,j=wp.blob.isBlobURL,A=function(e){function t(){var e;return o()(this,t),e=s()(this,u()(t).apply(this,arguments)),e.onImageClick=e.onImageClick.bind(d()(d()(e))),e.onSelectCaption=e.onSelectCaption.bind(d()(d()(e))),e.onKeyDown=e.onKeyDown.bind(d()(d()(e))),e.bindContainer=e.bindContainer.bind(d()(d()(e))),e.state={captionSelected:!1},e}return g()(t,e),i()(t,[{key:"bindContainer",value:function(e){this.container=e}},{key:"onSelectCaption",value:function(){this.state.captionSelected||this.setState({captionSelected:!0}),this.props.isSelected||this.props.onSelect()}},{key:"onImageClick",value:function(){this.props.isSelected||this.props.onSelect(),this.state.captionSelected&&this.setState({captionSelected:!1})}},{key:"onKeyDown",value:function(e){this.container===document.activeElement&&this.props.isSelected&&-1!==[E,I].indexOf(e.keyCode)&&(e.stopPropagation(),e.preventDefault(),this.props.onRemove())}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isSelected,l=t.image,o=t.url;l&&!o&&this.props.setAttributes({url:l.source_url,alt:l.alt_text}),this.state.captionSelected&&!n&&e.isSelected&&this.setState({captionSelected:!1})}},{key:"render",value:function(){var e=this.props,t=e.url,n=e.alt,l=e.id,o=(e.link,e.isSelected),r=e.caption,i=e.onRemove,a=e.setAttributes,s=e.classes,c=e["aria-label"];console.log("url",t);var u=wp.element.createElement(v,null,wp.element.createElement("img",{src:t,alt:n,"data-id":l,onClick:this.onImageClick,tabIndex:"0",onKeyDown:this.onImageClick,"aria-label":c}),j(t)&&wp.element.createElement(k,null)),p=b()({"is-selected":o,"is-transient":j(t)},s);return wp.element.createElement("figure",{className:p,tabIndex:"-1",onKeyDown:this.onKeyDown,ref:this.bindContainer},o&&wp.element.createElement("div",{className:"core-blocks-gallery-item__inline-menu"},wp.element.createElement(w,{icon:"no-alt",onClick:i,className:"blocks-gallery-item__remove",label:O("Remove Image")})),u,r&&r.length>0||o?wp.element.createElement(L,{value:r,tagName:"figcaption",placeholder:O("Write caption\u2026"),isSelected:this.state.captionSelected,onChange:function(e){return a({caption:e})},unstableOnFocus:this.onSelectCaption,inlineToolbar:!0}):null)}}]),t}(h);t.a=x(function(e,t){var n=e("core"),l=n.getMedia,o=t.id;return{image:o?l(o):null}})(A)},function(e,t,n){var l,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var l=arguments[t];if(l){var o=typeof l;if("string"===o||"number"===o)e.push(l);else if(Array.isArray(l)&&l.length){var i=n.apply(null,l);i&&e.push(i)}else if("object"===o)for(var a in l)r.call(l,a)&&l[a]&&e.push(a)}}return e.join(" ")}var r={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(l=[],void 0!==(o=function(){return n}.apply(t,l))&&(e.exports=o))}()}]);